/**
 * ys-remooz - Remooz a zoom function for pictures
 * @version v1.7.0
 * @link http://youngskilled.com
 * @author richard@youngskilled.com Young/Skilled
 * @license MIT
 */
!function(e,o){var t={isImageLoaded:function(e){return e.complete?"undefined"!=typeof e.naturalWidth&&0===e.naturalWidth?!1:!0:!1},assignImgVariables:function(e){var o=this;if("naturalWidth"in new Image)o.set.zoomSizeX=e.naturalWidth,o.set.zoomSizeY=e.naturalHeight;else{var t=new Image;t.src=e.src,o.set.zoomSizeX=t.width,o.set.zoomSizeY=t.height}"none"!==o.set.mgBehaviour&&o.set.$zoomMG.css({"background-image":"url("+e.src+")","background-color":"#fff","background-size":o.set.zoomSizeX+"px "+o.set.zoomSizeY+"px"})},testIfLoaded:function(){var s=this,i=e("#"+s.set.zoomID);!function n(){t.isImageLoaded(i[0])?(t.assignImgVariables.apply(s,[i[0]]),s.set.$zoomImgCont.find("img").hide(),i.fadeIn(200,function(){t.manipulateZoomImg.apply(s)}),t.manipulateZoomImg.apply(s),e(o).trigger("remooz.imgLoaded"),s.set.$zoomCont.find(s.set.preloader).hide()):requestAnimFrame(n)}()},initZoomImg:function(o,s){var i=this,n="",m=/\.(jpg|jpeg|png|gif)$/i,g=null;void 0===s&&(i.set.single===!1&&(g="none"!==i.set.mgBehaviour?o.index()-1:o.index(),i.set.debug===!0&&console.info("Zoom Image = ",o),i.set.currImg={pos:g,len:i.find(i.set.zoomPool+" img").length},1===i.set.currImg.len?i.set.$zoomImgCont.parent().find(i.set.prev+","+i.set.next).hide():i.set.$zoomImgCont.parent().find(i.set.prev+","+i.set.next).show()),(i.set.zoomTrigger!==!1||"none"===i.set.mgBehaviour)&&i.set.single!==!1&&(i.set.currImg={pos:i.set.singleIndex,len:e(i.set.single).find("img").length})),i.set.debug===!0&&0===o.length&&console.warn('No "zoomImg" found check your settings - default img.current'),n=o.attr("src"),i.set.zoomID=m.test(n)?"js-remooz-"+n.split("/").pop().replace(m,""):"js-remooz-"+n.split("/").pop(),0!==e("#"+i.set.zoomID).length&&t.isImageLoaded(e("#"+i.set.zoomID)[0])?(i.set.$zoomImgCont.find("img").hide(),t.assignImgVariables.apply(i,[e("#"+i.set.zoomID)[0]]),e("#"+i.set.zoomID).css("z-index",i.set.zoomZIndex).fadeIn(200,function(){t.manipulateZoomImg.apply(i)}),t.manipulateZoomImg.apply(i)):(i.set.$zoomCont.find(i.set.preloader).show(),i.set.sizeX=o.width(),i.set.sizeY=o.height(),n=void 0!==o.data("remooz-zoom-url")?o.data("remooz-zoom-url"):o.attr("src").replace(i.set.srcRegexp,i.set.srcStrReplace),i.set.$zoomImgCont.append('<img id="'+i.set.zoomID+'" src="'+n+'" style="z-index: '+i.set.zoomZIndex+'; width: 0; height: 0;" />'),t.testIfLoaded.apply(i,[n]))},changeZoomedImage:function(o){var s,i=this,n=/\D/;switch(i.set.zoomZIndex++,o){case"next":i.set.currImg.pos++;break;case"prev":i.set.currImg.pos--;break;default:n.test(o)||(i.set.currImg.pos=o)}i.set.currImg.pos=i.set.currImg.pos%i.set.currImg.len,s=i.set.single!==!1?e(i.set.single).eq(i.set.currImg.pos).find("img"):e(i.set.zoomPool).find("img:eq("+i.set.currImg.pos+")"),t.initZoomImg.apply(i,[s,i.set.currImg.pos])},manipulateZoomImg:function(){var t=this,s={},i=!1,n=e("#"+t.set.zoomID),m=1,g=1;t.set.img.contX=t.set.$zoomImgCont.width(),t.set.img.contY=e(o).height(),t.set.img.offsetY=t.set.$zoomCont.parent().offset().top,t.set.fitX&&(t.set.img.contX=t.set.img.contX-(t.set.imgOffset[1]+t.set.imgOffset[3]),m=t.set.img.contX/t.set.zoomSizeX),t.set.fitY&&(t.set.img.contY=t.set.img.contY-(t.set.imgOffset[0]+t.set.imgOffset[2]),t.set.img.offsetY=t.set.imgOffset[0],g=t.set.img.contY/t.set.zoomSizeY),t.set.img.scale=g>m?m:g,t.set.img.scale>=1?(t.set.img.scale=1,e.extend(s,{width:t.set.zoomSizeX,height:t.set.zoomSizeY})):e.extend(s,{width:t.set.img.scale*t.set.zoomSizeX,height:t.set.img.scale*t.set.zoomSizeY}),t.set.touch&&t.set.$zoomCont.css({position:"absolute",top:-t.set.img.offsetY}),t.set.img.contX>=t.set.zoomSizeX*t.set.img.scale?(t.set.img.X=(t.set.img.contX-t.set.zoomSizeX*t.set.img.scale)/2+t.set.imgOffset[3],e.extend(s,{left:t.set.img.X}),t.set.img.ratioX=0):t.set.fitX||(t.set.img.ratioX=Math.floor((t.set.zoomSizeX*t.set.img.scale-t.set.img.contX)/t.set.img.contX*100)/100,t.set.touch||(t.set.img.X=t.set.img.ratioX*t.set.img.scale*-1-t.set.imgOffset[3],e.extend(s,{left:t.set.img.X}))),t.set.img.contY>=t.set.zoomSizeY*t.set.img.scale?t.set.touch||(t.set.img.offsetY=(t.set.img.contY-t.set.zoomSizeY*t.set.img.scale)/2,e.extend(s,{top:t.set.img.offsetY}),t.set.img.ratioY=0):t.set.fitY||(t.set.img.ratioY=Math.floor((t.set.zoomSizeY*t.set.img.scale-t.set.img.contY)/t.set.img.contY*100)/100,t.set.touch||(t.set.img.Y=t.set.img.ratioY*t.set.img.scale*-1-t.set.imgOffset[0],e.extend(s,{top:t.set.img.Y}))),!t.set.img.ratioY&&!t.set.img.ratioX||i?(e(document,o).off("mousemove"),i=!1):(i=!0,e(document,o).on("mousemove",function(e){t.set.img.ratioX&&(t.set.img.X=e.clientX*t.set.img.ratioX*-1,s.left=t.set.img.X),t.set.img.ratioY&&(t.set.img.Y=e.clientY*t.set.img.ratioY*-1,s.top=t.set.img.Y),n.css(s)})),n.css(s)},manipulateMG:function(e,o,t){var s=this,i="fixed-all"===s.set.mgBehaviour||"fixed"===s.set.mgBehaviour;return e.mgLeft=e.left<o.X/2&&i?0:e.left>s.set.sizeX-o.X/2-s.set.mgImgOffset[1]-s.set.mgImgOffset[3]&&i?s.set.sizeX-o.X-s.set.mgImgOffset[1]-s.set.mgImgOffset[3]:e.left-o.X/2-2,e.mgTop=e.top<o.Y/2&&i?0:e.top>s.set.sizeY-o.Y/2-s.set.mgImgOffset[0]-s.set.mgImgOffset[2]&&i?s.set.sizeY-o.Y-s.set.mgImgOffset[0]-s.set.mgImgOffset[2]:e.top-o.Y/2-2,e.bgpX=-1*Math.floor((e.left+s.set.mgImgOffset[3])*t-o.X/2),e.bgpY=-1*Math.floor((e.top+s.set.mgImgOffset[0])*t-o.Y/2),{top:e.mgTop,left:e.mgLeft,"background-position":e.bgpX+"px "+e.bgpY+"px"}},openZoom:function(){var o=this,t=null;o.set.isZoomed=!0,e("html,body").css("overflow","hidden"),o.set.$zoomCont.fadeIn(400),o.set.showThumbs&&(t=e(o.set.zoomThumbPool).find("img").clone(),e(o.set.zoomThumbCont).html(t))},closeZoom:function(){var t=this;t.set.isZoomed=!1,e("html,body").css("overflow","auto"),e(o).scrollTop(t.set.scrollPos),t.set.$zoomCont.fadeOut(400,function(){e(this).find(".center-zoom").removeClass("center-zoom")}),e(t.set.viewNext).off("click")},fullZoomInit:function(){var s=this;t.openZoom.apply(s),e(o).on("resize",function(){t.manipulateZoomImg.apply(s)}),s.set.viewNext!==!1&&e(s.set.viewNext).on("click",function(){t.changeZoomedImage.apply(s,["next"])}),s.set.showThumbs&&e(s.set.zoomThumbCont).on("click","img",function(){var o=e(this).index();t.changeZoomedImage.apply(s,[o])}),s.set.$zoomCont.off("remooz.closeZoom").on("remooz.closeZoom",function(){t.closeZoom.apply(s)}).off("remooz.nextZoomImg").on("remooz.nextZoomImg",function(){t.changeZoomedImage.apply(s,["next"])}).off("remooz.prevZoomImg").on("remooz.prevZoomImg",function(){t.changeZoomedImage.apply(s,["prev"])})},touchClick:function(){return Math.abs(Math.abs(m.startX)-Math.abs(m.endX))<50&&Math.abs(Math.abs(m.startY)-Math.abs(m.endY))<50},longTouch:function(){return m.endTime-m.startTime>800},zoomPoolInit:function(){var s=this,i={},n=0,m={},g={},r={},a={},l=s.set.zoomPool;"none"!==s.set.mgBehaviour&&(s.set.$zoomMG=s.find(s.set.zoomMG),m.X=s.set.$zoomMG.width(),m.Y=s.set.$zoomMG.height()),s.set.zoomTrigger!==!1&&("none"===s.set.mgBehaviour?l=s.set.zoomTrigger:l.add(s.set.zoomTrigger)),s.set.debug===!0&&console.info("Triggered element = "+l),s.on({mouseenter:function(){var o=e(this).parent().find(s.set.zoomImg);s.set.single===!1&&t.initZoomImg.apply(s,[o,void 0]),"none"!==s.set.mgBehaviour&&(s.set.$zoomMG=e(this).find(s.set.zoomMG),s.set.$zoomMG.show(),n=s.set.zoomSizeX/s.set.sizeX,i=e(this).offset(),i.left=Math.floor(i.left),i.top=Math.floor(i.top))},mouseleave:function(){"none"!==s.set.mgBehaviour&&s.set.$zoomMG.hide()},mousemove:function(e){"none"!==s.set.mgBehaviour&&(g.left=e.pageX-i.left,g.top=e.pageY-i.top,g.inBounds=g.top<0||g.left<0||g.top>s.set.sizeY||g.left>s.set.sizeX?!1:!0,g.inBounds?s.set.$zoomMG.css(t.manipulateMG.apply(s,[g,m,n])):s.set.$zoomMG.hide())},touchstart:function(e){s.set.touch=!0,r.X=e.originalEvent.targetTouches[0].pageX,r.Y=e.originalEvent.targetTouches[0].pageY,r.time=e.originalEvent.timeStamp,a.dir="",a.move=""},touchend:function(o){if(t.touchClick()){o.preventDefault();var i=e(this).parent().find(s.set.zoomImg);t.initZoomImg.apply(s,[i,void 0]),e("html,body").scrollTop(0),t.fullZoomInit.apply(s)}},click:function(i){i.preventDefault(),s.set.scrollPos=e(o).scrollTop();var n=e(this).parent().find(s.set.zoomImg);t.initZoomImg.apply(s,[n,void 0]),e("html,body").scrollTop(0),t.fullZoomInit.apply(s)}},l)}},s={init:function(s){var g=null,r={};return r=e.extend({},i,s),n.$zoomImgCont=e(r.zoomCont),n.$zoomCont=n.$zoomImgCont.parent(),n.$zoomCont.on({click:function(o){o.preventDefault(),o.target==e(this)[0]&&n.$zoomCont.trigger("remooz.closeZoom")},touchstart:function(e){n.touch=!0,g=e.originalEvent.timeStamp},touchend:function(o){o.originalEvent.timeStamp-g<400&&(o.preventDefault(),o.target==e(this)[0]&&n.$zoomCont.trigger("remooz.closeZoom"))}}).on("click touchstart",r.prev,function(e){e.preventDefault(),n.$zoomCont.trigger("remooz.prevZoomImg")}).on("click touchstart",r.next,function(e){e.preventDefault(),n.$zoomCont.trigger("remooz.nextZoomImg")}).on("click touchstart",r.close,function(e){e.preventDefault(),n.$zoomCont.trigger("remooz.closeZoom")}),e(o).on({keydown:function(e){switch(e.keyCode){case 27:n.$zoomCont.trigger("remooz.closeZoom");break;case 37:n.$zoomCont.trigger("remooz.prevZoomImg");break;case 39:n.$zoomCont.trigger("remooz.nextZoomImg")}},touchstart:function(e){m.startX=e.originalEvent.targetTouches[0].clientX,m.startY=e.originalEvent.targetTouches[0].clientY,m.endX=e.originalEvent.targetTouches[0].clientX,m.endY=e.originalEvent.targetTouches[0].clientY,m.startTime=(new Date).getTime(),m.endTime=(new Date).getTime()},touchmove:function(e){m.endX=e.originalEvent.targetTouches[0].clientX,m.endY=e.originalEvent.targetTouches[0].clientY,m.endTime=(new Date).getTime()}}),this.each(function(o){var m=e(this),g=m.data();m.set=e.extend({},r,g,n),m.set.debug===!0&&(console.warn(":::: REMOOZ Debug has been set to true ::::"),console.log("Options -> ",e.extend({},i,s,g))),0===e(m.set.zoomMG).length&&"none"!==m.set.mgBehaviour&&(m.set.debug===!0&&console.info("mgBehaviour set to none, no magnifying glass found: "+m.set.zoomMG),m.set.mgBehaviour="none"),0===e(m.set.zoomTrigger).length&&m.set.zoomTrigger!==!1&&(m.set.debug===!0&&console.info("zoomTrigger set to false, "+m.set.zoomTrigger+" element not found"),m.set.zoomTrigger=!1),0!==e(m.set.zoomThumbPool).length&&0!==e(m.set.zoomThumbCont).length||m.set.showThumbs===!1||(m.set.debug===!0&&console.info("showThumbs set to false, "+m.set.zoomThumbPool+", "+m.set.zoomThumbCont+" elements not found"),m.set.showThumbs=!1),0===e(m.set.single).length&&m.set.single!==!1?(m.set.debug===!0&&console.info("showThumbs set to false, "+m.set.single+" elements not found"),m.set.showThumbs=!1):m.set.singleIndex=o,t.zoomPoolInit.apply(m)})},update:function(o){return this.each(function(){var s=e(this),m=s.data();s.set=e.extend({},i,o,m,n),t.zoomPoolInit.apply(s)})},closeZoom:function(){return this.each(function(){var o=e(this);o.set=o.data(),o.set.$zoomCont.trigger("remooz.closeZoom")})},destroy:function(o){return this.each(function(){var s=e(this),m=s.data();s.set=e.extend({},i,o,m,n),t.zoomPoolInit.apply(s)})}},i={fitX:!0,fitY:!1,srcRegexp:/\.(jpg|jpeg|png|gif)$/i,srcStrReplace:"-large.$1",showThumbs:!1,single:!1,zoomTrigger:!1,imgOffset:[0,0,0,0],mgBehaviour:"fixed",mgImgOffset:[0,0,0,0],zoomCont:"#js-remooz-zoomContainer",zoomThumbCont:"#js-remooz-zoomThumbnailContainer",zoomPool:"#js-remooz-imagePool",zoomThumbPool:"#js-remooz-thumbnailPool",zoomMG:"#js-remooz-zoomMagnifyingGlass",zoomImg:"img.current",close:".js-remooz-close",prev:".js-remooz-prev",next:".js-remooz-next",preloader:".js-remooz-preloader",debug:!1},n={$zoomMG:{},$zoomCont:{},$zoomImgCont:{},touch:!1,isZoomed:!1,isMagnified:!1,currImg:{},img:{scale:1},zoomZIndex:1,zoomSizeX:0,zoomSizeY:0,sizeX:0,sizeY:0,singleIndex:null,zoomID:"",scrollPos:0},m={};o.requestAnimFrame=function(){return o.requestAnimationFrame||o.webkitRequestAnimationFrame||o.mozRequestAnimationFrame||o.oRequestAnimationFrame||o.msRequestAnimationFrame||function(e){o.setTimeout(e,1e3/60)}}(),e.fn.remooz=function(o){return s[o]?s[o].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof o&&o?void e.error("Method "+o+" does not exist on jQuery.remooz"):s.init.apply(this,arguments)}}(jQuery,window);